<!doctype html>
<html>
<head>
<title>Test #3</title>
<!-- Include URL to the latest version of WebTorrent -->
<script src="https://cdn.jsdelivr.net/npm/webtorrent@latest/webtorrent.min.js"></script>
<meta charset="utf-8"/>
</head>
  <body>
    <h1>WebTorrent Stealth Test #3</h1>

    <script>
      // Create WebTorrent client
      var cl = new WebTorrent();
      
      // Load os3.txt into bytearray
      data = ""
      data += "\x20\x20\x20\x5f\x5f\x5f\x20\x20\x20\x20\x20\x5f\x5f\x5f\x20"
      data += "\x20\x20\x20\x20\x5f\x5f\x5f\x5f\x20\x20\x0d\x0a\x20\x20\x2f"
      data += "\x20\x5f\x20\x5c\x20\x20\x20\x2f\x20\x5f\x5f\x7c\x20\x20\x20"
      data += "\x7c\x5f\x5f\x20\x2f\x20\x20\x0d\x0a\x20\x7c\x20\x28\x5f\x29"
      data += "\x20\x7c\x20\x20\x5c\x5f\x5f\x20\x5c\x20\x20\x20\x20\x7c\x5f"
      data += "\x20\x5c\x20\x20\x0d\x0a\x20\x20\x5c\x5f\x5f\x5f\x2f\x20\x20"
      data += "\x20\x7c\x5f\x5f\x5f\x2f\x20\x20\x20\x7c\x5f\x5f\x5f\x2f\x20"
      data += "\x20\x0d\x0a\x5f\x7c\x22\x22\x22\x22\x22\x7c\x5f\x7c\x22\x22"
      data += "\x22\x22\x22\x7c\x5f\x7c\x22\x22\x22\x22\x22\x7c\x20\x0d\x0a"
      data += "\x22\x60\x2d\x30\x2d\x30\x2d\x27\x22\x60\x2d\x30\x2d\x30\x2d"
      data += "\x27\x22\x60\x2d\x30\x2d\x30\x2d\x27\x20\x0d\x0a\x0d\x0a\x46"
      data += "\x69\x6e\x65\x20\x41\x53\x43\x49\x49\x20\x61\x72\x74\x20\x66"
      data += "\x6f\x72\x20\x4f\x53\x33\x0d\x0a"
      
      // File name for seed data
      var filename = "os3.txt";

      // Create blob of type .txt
      var blob = new Blob([data], {type: "text/plain"});

      // Convert blob to file
      var myFile = blobToFile(blob, filename);

      // Function to convert blob to file
      function blobToFile(x, n){
              x.lastModifiedDate = new Date();
              x.name = n;
              return x;
      }

      // Seed file and store Magnet URI and file download URL in variables
      cl.seed(myFile, function (torrent) {
        dl_magnet = torrent.magnetURI;
        dl_torrent = torrent.torrentFileBlobURL;

      //Print Magnet URI and file download URL to console
        //console.log(window.dl_torrent);
        //console.log(window.dl_magnet);
      })
    </script>
  </body>
</html>
